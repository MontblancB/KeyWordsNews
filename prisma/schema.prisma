datasource db {
  provider = "postgresql"
  url      = env("PRISMA_DATABASE_URL")
  directUrl = env("POSTGRES_URL")
}

generator client {
  provider = "prisma-client-js"
}

model News {
  id           String   @id @default(cuid())
  title        String
  url          String   @unique
  summary      String   @db.Text
  source       String
  category     String
  publishedAt  DateTime
  imageUrl     String?
  isBreaking   Boolean  @default(false)

  // AI 요약 필드
  aiSummary       String?   @db.Text
  aiKeywords      String[]  @default([])
  aiOneLiner      String?   // 한 줄 정리 (20-30자)
  aiSummarizedAt  DateTime?
  aiProvider      String?   // 사용된 AI 프로바이더 (groq, openai, gemini 등)

  // AI 전문가 의견 필드
  aiInsight         String?   @db.Text  // 전문가 의견 내용
  aiInsightExpert   String?             // 전문가 이름/직함
  aiInsightKeywords String[]  @default([]) // 전문가 의견 키워드
  aiInsightAt       DateTime?           // 생성 시간
  aiInsightProvider String?             // 사용된 AI 프로바이더

  createdAt    DateTime @default(now())
  updatedAt    DateTime @updatedAt

  @@index([category])
  @@index([publishedAt])
  @@index([isBreaking])
  @@index([source])
  @@index([aiSummarizedAt])
  @@index([aiInsightAt])
}
