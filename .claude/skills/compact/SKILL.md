---
name: compact
description: 현재까지의 작업 내용을 자동으로 분석하고 정리하여 CLAUDE.md와 설정 페이지에 업데이트합니다. 작업을 문서화하고 버전을 정리하려 할 때 사용합니다.
allowed-tools:
  - Read
  - Edit
  - Bash(git status:*)
  - Bash(git diff:*)
  - Bash(git log:*)
  - Glob
  - Grep
---

# Compact Workflow

현재까지의 작업 내용을 자동으로 분석하고 CLAUDE.md에 정리하는 워크플로우입니다.

## ⚠️ 중요: 스킬 활성화 시 사용자에게 알리기

**이 스킬이 활성화되면 반드시 먼저 다음 메시지를 사용자에게 표시하세요:**

```
📝 **compact 스킬이 활성화되었습니다**

현재까지의 작업 내용을 분석하고 문서화합니다:
1. ✅ 변경사항 분석
2. ✅ 버전 계산
3. ✅ 문서 업데이트 (CLAUDE.md, 설정 페이지)
4. ✅ 요약 보고서 생성

진행하시겠습니까?
```

사용자가 확인하면 프로세스를 시작합니다.

## 프로세스 개요

이 스킬이 활성화되면 다음 단계를 자동으로 수행합니다:

1. **변경사항 분석** - Git 상태 확인 및 변경 내용 분석
2. **버전 계산** - Semantic Versioning 규칙에 따라 적절한 버전 결정
3. **문서 업데이트** - CLAUDE.md 및 app/settings/page.tsx 업데이트
4. **요약 보고서** - 사용자에게 변경사항 요약 보고

---

## 1단계: 변경사항 분석

**단계 시작 시 사용자에게 표시:**
```
📊 **1/4: 변경사항 분석 중...**
```

### 확인할 사항

1. **Git 상태 확인**
```bash
git status --short
```

2. **변경사항 확인**
```bash
git diff
```

3. **최근 커밋 확인** (문서화되지 않은 작업이 있는지)
```bash
git log --oneline -5
```

### 분석 내용

- 수정된 파일 목록
- 추가된 파일 목록
- 삭제된 파일 목록
- 변경의 성격 파악 (기능 추가, 버그 수정, 문서, 리팩토링 등)

---

## 2단계: 버전 계산

**단계 시작 시 사용자에게 표시:**
```
🔢 **2/4: 버전 계산 중...**
```

### CLAUDE.md에서 현재 버전 읽기

1. CLAUDE.md 파일 읽기
2. 20번째 줄 근처에서 현재 버전 찾기: `- **현재 버전**: X.Y.Z`
3. 버전 파싱 (예: 2.8.0)

### 버전 범프 규칙 (Semantic Versioning)

```
MAJOR.MINOR.PATCH

- MAJOR: 호환성 없는 변경, 주요 기능 재설계 (2.0.0 → 3.0.0)
- MINOR: 새 기능, 개선사항 (2.8.0 → 2.9.0)
- PATCH: 버그 수정, 사소한 변경 (2.8.0 → 2.8.1)
```

### 변경사항 분류

**파일 경로 및 내용을 기반으로 자동 분류:**

#### MINOR 버전 (기능 추가/개선)
- `components/` 내 새 컴포넌트 추가
- `app/` 내 새 페이지 추가
- `lib/` 내 새 유틸리티 추가
- `hooks/` 내 새 Hook 추가
- API 엔드포인트 추가
- 주요 UI/UX 개선
- 성능 최적화
- 새로운 기능 추가

#### PATCH 버전 (버그 수정)
- 버그 수정
- 타이포 수정
- 스타일 미세 조정
- 의존성 업데이트 (패치)

#### MAJOR 버전 (호환성 없는 변경)
- 데이터베이스 스키마 주요 변경
- API 인터페이스 변경
- 전체 구조 재설계
- 의존성 메이저 업데이트

**대부분의 경우 MINOR 또는 PATCH입니다.**

---

## 3단계: 문서 업데이트

**단계 시작 시 사용자에게 표시:**
```
📚 **3/4: 문서 업데이트 중...**
```

### CLAUDE.md 업데이트

#### 1. 현재 버전 업데이트 (20번째 줄 근처)

```markdown
- **현재 버전**: X.Y.Z
```

**Edit 도구 사용:**
```
old_string: - **현재 버전**: 2.8.0
new_string: - **현재 버전**: 2.9.0
```

#### 2. 마지막 업데이트 날짜 업데이트 (21번째 줄 근처)

```markdown
- **마지막 업데이트**: YYYY-MM-DD
```

오늘 날짜로 업데이트합니다.

**Edit 도구 사용:**
```
old_string: - **마지막 업데이트**: 2026-01-17
new_string: - **마지막 업데이트**: 2026-01-18
```

#### 3. 최근 업데이트 섹션에 체인지로그 추가

**위치**: "## 최근 업데이트" 섹션의 최상단 (가장 최근 항목 위에)

**형식:**
```markdown
### vX.Y.Z (YYYY-MM-DD)
**기능 제목**

#### 주요 변경사항
- 변경사항 1
- 변경사항 2
- 변경사항 3

#### 기술적 개선
- 기술적 세부사항 1
- 기술적 세부사항 2

---
```

**변경사항 작성 가이드:**
1. 명확하고 간결하게
2. 사용자 관점에서 작성 (기술적 세부사항은 별도 섹션에)
3. 이모지 활용 (✨ 새 기능, 🐛 버그 수정, 📝 문서, ⚡ 성능, 🎨 UI/UX)
4. 구체적인 내용 포함

**예시:**
```markdown
### v2.9.0 (2026-01-17)
**폰트 크기 조절 기능 추가**

#### 새로운 기능
- ⚙️ **폰트 크기 조절**: 설정 페이지에서 5단계 폰트 크기 조절 (12px~20px)
- 🔄 **실시간 적용**: +/- 버튼으로 즉시 폰트 크기 변경
- 💾 **영구 저장**: localStorage에 설정 자동 저장

#### 기술적 개선
- 📄 **hooks/useFontSize.ts**: 폰트 크기 관리 Hook 추가
- 🎨 **components/FontSizeControl.tsx**: 폰트 크기 조절 UI 컴포넌트
- 🌐 **app/globals.css**: CSS 변수 활용한 전역 폰트 크기 적용

---
```

#### 4. 파일 맨 아래 버전 정보 업데이트

**위치**: CLAUDE.md 파일 맨 아래 (마지막 2줄)

```markdown
**Last Updated**: YYYY-MM-DD
**Version**: X.Y.Z
```

**Edit 도구 사용:**
```
old_string: **Last Updated**: 2026-01-17
**Version**: 2.8.0

new_string: **Last Updated**: 2026-01-18
**Version**: 2.9.0
```

### app/settings/page.tsx 업데이트

#### 1. 버전 번호 (38번째 줄 근처)

```typescript
<p>버전: X.Y.Z</p>
```

**Edit 도구 사용:**
```
old_string: <p>버전: 2.8.0</p>
new_string: <p>버전: 2.9.0</p>
```

#### 2. 마지막 업데이트 날짜 (39번째 줄 근처)

```typescript
<p>마지막 업데이트: YYYY-MM-DD</p>
```

**Edit 도구 사용:**
```
old_string: <p>마지막 업데이트: 2026-01-17</p>
new_string: <p>마지막 업데이트: 2026-01-18</p>
```

---

## 4단계: 요약 보고서

**단계 시작 시 사용자에게 표시:**
```
📋 **4/4: 요약 보고서 생성 중...**
```

### 보고서 내용

사용자에게 다음 정보를 보고합니다:

```
✅ **문서 업데이트 완료!**

📊 **변경 요약**
- 수정된 파일: X개
- 추가된 파일: Y개
- 삭제된 파일: Z개

🔢 **버전 정보**
- 이전 버전: 2.8.0
- 새 버전: 2.9.0 (MINOR)

📝 **업데이트된 파일**
- ✅ CLAUDE.md (버전, 날짜, 체인지로그)
- ✅ app/settings/page.tsx (버전, 날짜)

📚 **체인지로그 추가**
### v2.9.0 (2026-01-18)
**폰트 크기 조절 기능 추가**
...

---

💡 **다음 단계**
변경사항을 커밋하려면 `/automated-publishing` 스킬을 사용하세요.
또는 직접 커밋:
```bash
git add -A
git commit -m "docs: v2.9.0 문서 업데이트"
git push origin main
```
```

---

## 전체 워크플로우 템플릿

**중요: 각 단계마다 진행 상황을 사용자에게 명확히 표시하세요**

1. **스킬 활성화 알림** - "📝 compact 스킬이 활성화되었습니다"
2. 사용자 확인 대기
3. **1/4 단계 표시** - "📊 1/4: 변경사항 분석 중..."
   - `git status`, `git diff`로 변경사항 확인
   - 변경 파일 목록 작성
   - 변경 성격 분류 (기능/버그/문서/등)
4. **2/4 단계 표시** - "🔢 2/4: 버전 계산 중..."
   - CLAUDE.md에서 현재 버전 읽기
   - 변경사항 기반 버전 범프 계산
   - 새 버전 결정
5. **3/4 단계 표시** - "📚 3/4: 문서 업데이트 중..."
   - CLAUDE.md 버전 업데이트 (3군데)
   - app/settings/page.tsx 업데이트 (2군데)
   - 체인지로그 항목 작성 및 추가
6. **4/4 단계 표시** - "📋 4/4: 요약 보고서 생성 중..."
   - 전체 변경사항 요약
   - 버전 정보 표시
   - 다음 단계 안내
7. **완료 메시지** - "✅ 문서 업데이트 완료! 📝"

---

## 에러 핸들링

### CLAUDE.md를 찾을 수 없을 때
- 프로젝트 루트에 CLAUDE.md가 있는지 확인
- 경로가 올바른지 확인
- 사용자에게 알림

### 버전 형식이 다를 때
- 현재 CLAUDE.md의 버전 형식 확인
- 형식에 맞게 업데이트
- 표준 Semantic Versioning 권장

### Git 상태 확인 실패
- Git 저장소인지 확인
- 사용자에게 수동 확인 요청

---

## 대화 예시

**사용자**: "컴팩트"

**Claude** (이 스킬 활용):

```
📝 **compact 스킬이 활성화되었습니다**

현재까지의 작업 내용을 분석하고 문서화합니다:
1. ✅ 변경사항 분석
2. ✅ 버전 계산
3. ✅ 문서 업데이트 (CLAUDE.md, 설정 페이지)
4. ✅ 요약 보고서 생성

진행하시겠습니까?
```

**사용자**: "네"

```
📊 **1/4: 변경사항 분석 중...**

변경된 파일: 3개
- hooks/useFontSize.ts (새 파일)
- components/FontSizeControl.tsx (새 파일)
- app/settings/page.tsx (수정됨)

변경 성격: 새 기능 추가 (MINOR)

---

🔢 **2/4: 버전 계산 중...**

현재 버전: 2.8.0
새 버전: 2.9.0 (MINOR)

---

📚 **3/4: 문서 업데이트 중...**

✅ CLAUDE.md 버전 업데이트 (20번째 줄)
✅ CLAUDE.md 날짜 업데이트 (21번째 줄)
✅ CLAUDE.md 체인지로그 추가
✅ CLAUDE.md 맨 아래 버전 정보 업데이트
✅ app/settings/page.tsx 버전 업데이트
✅ app/settings/page.tsx 날짜 업데이트

---

📋 **4/4: 요약 보고서 생성 중...**

✅ **문서 업데이트 완료!**

📊 **변경 요약**
- 수정된 파일: 1개
- 추가된 파일: 2개
- 삭제된 파일: 0개

🔢 **버전 정보**
- 이전 버전: 2.8.0
- 새 버전: 2.9.0 (MINOR)

📝 **업데이트된 파일**
- ✅ CLAUDE.md (버전, 날짜, 체인지로그)
- ✅ app/settings/page.tsx (버전, 날짜)

📚 **체인지로그 추가**
### v2.9.0 (2026-01-18)
**폰트 크기 조절 기능 추가**

#### 새로운 기능
- ⚙️ 설정 페이지에서 5단계 폰트 크기 조절
- 🔄 실시간 적용 및 영구 저장

---

💡 **다음 단계**
변경사항을 커밋하려면 `/automated-publishing` 스킬을 사용하세요.
```

---

## 체인지로그 작성 가이드

### 카테고리별 이모지

- ✨ 새 기능
- 🐛 버그 수정
- 📝 문서
- ⚡ 성능
- 🎨 UI/UX
- 🔧 설정/도구
- ♻️ 리팩토링
- 🗑️ 제거
- 📦 의존성
- 🔐 보안

### 작성 원칙

1. **명확성**: 무엇이 변경되었는지 명확히
2. **간결성**: 한 줄에 하나의 변경사항
3. **사용자 중심**: 사용자 관점에서 작성
4. **구체성**: 추상적이지 않게, 구체적인 내용 포함

### 좋은 예시

```markdown
#### 새로운 기능
- ⚙️ **폰트 크기 조절**: 설정 페이지에서 5단계 폰트 크기 조절 (12px~20px)
- 🔄 **실시간 적용**: +/- 버튼으로 즉시 폰트 크기 변경
- 💾 **영구 저장**: localStorage에 설정 자동 저장
```

### 나쁜 예시

```markdown
#### 새로운 기능
- 폰트 관련 기능 추가
- 설정 개선
- 기타 수정사항
```

---

## 성공 기준

- CLAUDE.md 버전 번호 업데이트 완료 (3군데)
- app/settings/page.tsx 버전 정보 업데이트 완료 (2군데)
- 체인지로그 항목 추가 완료
- 변경사항 요약 보고서 제공 완료
- 모든 Edit 작업 성공
