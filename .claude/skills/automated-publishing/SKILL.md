---
name: automated-publishing
description: KeyWordsNews 프로젝트의 완전한 배포 워크플로우를 자동화합니다. 코드 검토, 문서 업데이트, Git 커밋, GitHub 푸시를 처리합니다. 기능을 완성하고 배포하려 할 때, 또는 변경사항을 릴리스하거나 배포하려 할 때 사용합니다.
allowed-tools:
  - Read
  - Edit
  - Bash(git add:*)
  - Bash(git status:*)
  - Bash(git diff:*)
  - Bash(git log:*)
  - Bash(git commit:*)
  - Bash(git push:*)
  - Bash(git branch:*)
  - Bash(npm run build)
  - Bash(find:*)
  - Glob
  - Grep
---

# Automated Publishing Workflow

KeyWordsNews 프로젝트를 위한 완전한 배포 워크플로우: 코드 검토 → 문서 업데이트 → 커밋 → 푸시

## ⚠️ 중요: 스킬 활성화 시 사용자에게 알리기

**이 스킬이 활성화되면 반드시 먼저 다음 메시지를 사용자에게 표시하세요:**

```
🚀 **automated-publishing 스킬이 활성화되었습니다**

자동 배포 워크플로우를 시작합니다:
1. ✅ 코드 검토
2. ✅ 빌드 검증
3. ✅ 문서 업데이트
4. ✅ Git 커밋
5. ✅ GitHub 푸시

진행하시겠습니까?
```

사용자가 확인하면 프로세스를 시작합니다.

## 프로세스 개요

이 스킬이 활성화되면 다음 단계를 안내합니다:

1. **코드 품질 검토** - 변경된 코드 확인
2. **빌드 검증** - 빌드가 성공하는지 확인
3. **문서 업데이트** - CLAUDE.md 및 버전 업데이트
4. **Git 커밋** - 적절한 커밋 메시지 생성
5. **Git 푸시** - main 브랜치로 푸시

---

## 1단계: 코드 검토

**단계 시작 시 사용자에게 표시:**
```
📝 **1/5: 코드 검토 중...**
```

### 확인할 사항

- 코드 품질 및 가독성
- 보안 취약점
- 성능 이슈
- 적절한 에러 핸들링
- 노출된 시크릿이나 API 키

### 검토 체크리스트

```
[ ] 코드가 명확하고 잘 구조화되어 있음
[ ] 변수와 함수명이 의미있음
[ ] 중복 코드가 없음 (DRY 원칙)
[ ] 적절한 에러 핸들링
[ ] 시크릿이나 API 키가 노출되지 않음
[ ] 입력 검증이 구현됨
[ ] console.log 제거됨 (해당되는 경우)
[ ] TypeScript 타입이 제대로 정의됨
```

### 실행 방법

1. 현재 Git 상태 확인:
```bash
git status --short
git diff --staged
```

2. 변경된 파일 검토:
- 각 파일의 변경사항 분석
- 보안 이슈 확인
- 코드 품질 평가

3. 사용자에게 검토 결과 보고
4. 문제가 발견되면 계속 진행하기 전에 사용자 승인 요청

---

## 2단계: 빌드 검증

**단계 시작 시 사용자에게 표시:**
```
🔨 **2/5: 빌드 검증 중...**
```

빌드를 실행하여 깨지는 부분이 없는지 확인:

```bash
npm run build
```

**빌드 실패 시**:
- 즉시 중단
- 사용자에게 문제 해결 요청
- 수정 후 다시 시작

**빌드 성공 시**:
- 다음 단계로 진행

---

## 3단계: 문서 업데이트

**단계 시작 시 사용자에게 표시:**
```
📚 **3/5: 문서 업데이트 중...**
```

### CLAUDE.md 업데이트 형식

프로젝트는 Semantic Versioning을 사용하며 3가지 업데이트가 필요합니다:

#### 1. 버전 번호 (20번째 줄 근처)

```markdown
- **현재 버전**: X.Y.Z
```

#### 2. 마지막 업데이트 날짜 (21번째 줄 근처)

```markdown
- **마지막 업데이트**: YYYY-MM-DD
```

#### 3. 체인지로그 항목 (파일 끝, "최근 업데이트" 섹션)

```markdown
### vX.Y.Z (YYYY-MM-DD)
**기능 제목**

- 변경사항 1
- 변경사항 2
- 변경사항 3

#### 주요 개선사항
- 상세 설명 1
- 상세 설명 2
```

### 현재 CLAUDE.md 읽기

먼저 파일을 확인하여 다음을 이해합니다:
- 현재 버전 형식
- 마지막 체인지로그 항목 구조
- 버전 번호 패턴

### 버전 범프 규칙 (Semantic Versioning)

```
MAJOR.MINOR.PATCH

- MAJOR: 호환성 없는 변경, 주요 기능 (1.0.0 → 2.0.0)
- MINOR: 새 기능, 개선사항 (2.1.0 → 2.2.0)
- PATCH: 버그 수정, 사소한 변경 (2.2.0 → 2.2.1)
```

**대부분의 변경사항은 MINOR 범프** (새 기능/개선사항)입니다.

### 업데이트 프로세스

1. CLAUDE.md 파일 읽기
2. 현재 버전 확인 (예: 2.6.0)
3. 변경사항 분석:
   - 새 기능/개선 → MINOR 증가 (2.6.0 → 2.7.0)
   - 버그 수정만 → PATCH 증가 (2.6.0 → 2.6.1)
   - 호환성 없는 변경 → MAJOR 증가 (2.6.0 → 3.0.0)
4. 오늘 날짜 가져오기 (YYYY-MM-DD 형식)
5. 체인지로그 항목 작성 (변경사항 요약)
6. CLAUDE.md 수정:
   - Edit 도구로 버전 번호 업데이트
   - Edit 도구로 날짜 업데이트
   - Edit 도구로 체인지로그 항목 추가

---

## 4단계: Git 커밋

**단계 시작 시 사용자에게 표시:**
```
💾 **4/5: Git 커밋 생성 중...**
```

### 커밋 메시지 형식

Conventional Commits 형식 사용:

```
<type>(<scope>): <subject>

<body>

<footer>
```

#### Type (필수)
- **feat**: 새 기능
- **fix**: 버그 수정
- **docs**: 문서 변경
- **style**: 코드 스타일 (포맷팅, 세미콜론)
- **refactor**: 코드 리팩토링
- **perf**: 성능 개선
- **test**: 테스트 추가
- **chore**: 빌드, 의존성, 설정

#### Scope (선택)
- 영향받는 컴포넌트나 영역 (예: `performance`, `ui`, `api`)

#### Subject (필수)
- 간단한 설명, 현재 시제, 소문자, 마침표 없음
- 최대 50자
- Type을 Subject에 반복하지 말 것

#### Body (선택)
- 왜 변경했는지 상세 설명
- 72자마다 줄바꿈

#### Footer (선택)
- 이슈 참조: `Fixes #123`
- Breaking 변경: `BREAKING CHANGE: description`

### 커밋 메시지 예시

**예시 1 - 새 기능**:
```
feat(performance): 동적 프리페칭 시스템 구현

- 모든 카테고리에 대한 글로벌 백그라운드 프리페칭 추가
- 속도 제한을 위한 100ms 간격 구현
- 중복 요청 방지를 위해 5분간 캐시 결과

Fixes #45
```

**예시 2 - 버그 수정**:
```
fix(ui): KeywordManager 다크모드 색상 수정

- 입력 필드 배경색 업데이트
- 다크모드에서 버튼 hover 상태 수정

Fixes #78
```

**예시 3 - 문서**:
```
docs: CLAUDE.md에 스킬 생성 가이드 추가

- 커스텀 스킬 생성 방법 문서화
- 배포 워크플로우 자동화 설명 추가
```

### 커밋 프로세스

1. 사용자에게 변경사항 설명 요청 (아직 안 했다면)
2. 적절한 커밋 메시지 작성
3. 사용자에게 커밋 메시지 승인 요청
4. 승인되면:
```bash
git add -A
git commit -m "커밋 메시지"
```

---

## 5단계: Git 푸시

**단계 시작 시 사용자에게 표시:**
```
🚀 **5/5: GitHub 푸시 중...**
```

main 브랜치로 커밋을 푸시합니다:

```bash
git push origin main
```

푸시가 성공했는지 출력을 확인합니다.

### 푸시 실패 시

**흔한 이유**:
- 브랜치가 main이 아님
- 원격과 충돌
- 권한 없음

**해결**:
1. 현재 브랜치 확인: `git branch --show-current`
2. main이 아니면 사용자에게 알림
3. 충돌이 있으면 해결 가이드 제공

---

## 전체 워크플로우 템플릿

**중요: 각 단계마다 진행 상황을 사용자에게 명확히 표시하세요**

1. **스킬 활성화 알림** - "🚀 automated-publishing 스킬이 활성화되었습니다"
2. 사용자에게 배포할 기능에 대해 질문 (아직 안 물어봤다면)
3. **1/5 단계 표시** - "📝 1/5: 코드 검토 중..."
   - `git status`로 변경사항 확인
   - 코드 변경사항 검토
   - 검토 결과 보고
4. **2/5 단계 표시** - "🔨 2/5: 빌드 검증 중..."
   - `npm run build`로 검증
   - 결과 보고
5. **3/5 단계 표시** - "📚 3/5: 문서 업데이트 중..."
   - CLAUDE.md 업데이트 (버전, 날짜, 체인지로그)
   - app/settings/page.tsx 업데이트
6. **4/5 단계 표시** - "💾 4/5: Git 커밋 생성 중..."
   - 모든 변경사항 스테이징: `git add -A`
   - 적절한 메시지 형식으로 커밋 생성
7. **5/5 단계 표시** - "🚀 5/5: GitHub 푸시 중..."
   - origin/main으로 푸시
8. **완료 메시지** - "✅ 배포 완료! 🎉" + 요약 정보

---

## 에러 핸들링

단계 실패 시:

- **빌드 실패**: 중단하고 계속하기 전에 수정 요청
- **Git 푸시 실패**: 브랜치와 원격 확인, 해결 가이드
- **파일 읽기 실패**: 파일 존재 여부 확인 요청

---

## 대화 예시

**사용자**: "다크모드 기능 완성했어, 어떻게 배포하지?"

**Claude** (이 스킬 활용):

```
🚀 **automated-publishing 스킬이 활성화되었습니다**

자동 배포 워크플로우를 시작합니다:
1. ✅ 코드 검토
2. ✅ 빌드 검증
3. ✅ 문서 업데이트
4. ✅ Git 커밋
5. ✅ GitHub 푸시

진행하시겠습니까?
```

**사용자**: "네, 진행해주세요"

```
📝 **1/5: 코드 검토 중...**

변경된 파일: 4개
- components/ThemeToggle.tsx
- app/layout.tsx
- globals.css
- types/theme.ts

✅ 보안 이슈 없음
✅ TypeScript 타입 정의 완료
✅ 코드 품질 양호

---

🔨 **2/5: 빌드 검증 중...**

실행: npm run build
✅ 빌드 성공

---

📚 **3/5: 문서 업데이트 중...**

✅ 버전: 2.6.0 → 2.7.0 (MINOR)
✅ 날짜: 2026-01-17
✅ 체인지로그 항목 추가

---

💾 **4/5: Git 커밋 생성 중...**

커밋 메시지: "feat(ui): 다크모드 지원 추가"
✅ 커밋 완료

---

🚀 **5/5: GitHub 푸시 중...**

✅ origin/main으로 푸시 완료

---

✅ **배포 완료!** 🎉

버전: 2.7.0
변경된 파일: 4개
커밋: feat(ui): 다크모드 지원 추가
```

---

## 추가 고려사항

### app/settings/page.tsx도 업데이트

CLAUDE.md를 업데이트할 때, `app/settings/page.tsx`의 버전 정보도 업데이트해야 합니다:

```typescript
// 38번째 줄 근처
<p>버전: X.Y.Z</p>

// 39번째 줄 근처
<p>마지막 업데이트: YYYY-MM-DD</p>
```

### 체크리스트

커밋 전 확인사항:
- [ ] app/settings/page.tsx 버전 번호 업데이트
- [ ] app/settings/page.tsx 날짜 업데이트
- [ ] CLAUDE.md 현재 버전 업데이트 (20번째 줄)
- [ ] CLAUDE.md 마지막 업데이트 날짜 업데이트 (21번째 줄)
- [ ] CLAUDE.md 최근 업데이트 섹션에 변경사항 추가
- [ ] 적절한 커밋 메시지 작성
- [ ] 빌드 테스트 통과 (`npm run build`)

---

## 성공 기준

- 모든 변경사항 스테이징됨
- CLAUDE.md가 새 버전으로 업데이트됨
- app/settings/page.tsx도 업데이트됨
- 커밋 메시지가 Conventional Commits 형식 따름
- origin/main으로 성공적으로 푸시됨
